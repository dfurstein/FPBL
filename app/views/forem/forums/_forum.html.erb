<% if can?(:read, forum) %>
  <tr class="forum <%= cycle("odd", "even") %>">
    <td>
      <%= link_to forem_emojify(forum.title), forem.forum_path(forum), :class => "title" %>
      <% unless forum.description.nil? %>
        <div class='description'><%= forem_format(forum.description) %></div>
      <% end %>
      <div class='last_post'>
        <%= t('forem.forums.index.last_post') -%>
        <% if last_post = forum.posts.sort_by { |post| post.updated_at }.last -%>
          <%= link_to(forem_emojify(last_post.topic.subject), forem.forum_topic_path(forum, last_post.topic)) -%> 
          <%= t('by') %> 
          <%= last_post.user.forem_name %>
          &mdash;
          <time datetime="<%= last_post.created_at.to_s(:db) -%>">
            <%= "#{time_ago_in_words(last_post.updated_at)} #{t("ago")}" %>
          </time>
        <% else %>
          <%= t('forem.forums.index.none') -%>
        <% end %>
      </div>
    </td>
    <td class="topics-count"><%= topics_count(forum) %></td>
    <td class="posts-count"><%= posts_count(forum) %></td>
  </tr>
<% end %>
