<div class="row">
  <div class="col-md-10 col-md-offset-1">
    <%= simple_form_for :search,  url: transaction_path() do |f| %>
      <%= f.input :transaction_type,  
                    required: false,
                    label: 'Transaction Type',
                    prompt: 'All Transactions', 
                    collection: { 'Contract Extensions' => 'EXTEND', 
                                  'Free Agent Signings' => 'SIGN',
                                  'Player Releases' => 'RELEASE',
                                  'Trades' => 'TRADE' },
                    input_html: { class: "form-control" } %>
      <%= f.input :franchise_id, 
                    required: false,
                    label: 'Team',
                    prompt: 'All Teams',
                    collection: Hash[Team.current_teams.map { |team| [team.name, team.franchise_id] }],
                    input_html: { class: "form-control" } %>
      <%= f.input :from_date, 
                    required: false,
                    label: 'From', 
                    as: :string, 
                    input_html: { class: "date-picker form-control" } %>
      <%= f.input :to_date, 
                    required: false,
                    default: @to_date,
                    label: 'To', 
                    as: :string, 
                    input_html: { class: "date-picker form-control" } %>

      <div class='text-center top-buffer'>
        <%= f.button :submit, 'Submit', class: "btn btn-primary" %>
      </div>

    <% end %>
  </div>
</div>
<div class="row top-buffer">
  <div class="col-md-10 col-md-offset-1">
    <div class="panel panel-primary">
      <div class="panel-heading">Transactions</div>
      <% Transaction.all_ids(@franchise_id, @transaction_type, @from_date, @to_date).each do |id| %>
        <% @transaction = Transaction.where(transaction_group_id: id).first %>
        <% @id = id %>
        <% if @transaction.transaction_type == 'TRADE' %>
          <%= render "partials/transaction_trade", local: {transaction: @transaction, id: @id} %>
        <% elsif @transaction.transaction_type == 'SIGN' %>
          <%= render "partials/transaction_sign", local: {transaction: @transaction, id: @id} %>
        <% elsif @transaction.transaction_type == 'RELEASE' %>
          <%= render "partials/transaction_release", local: {transaction: @transaction, id: @id} %>
        <% elsif @transaction.transaction_type == 'EXTEND' %>
          <%= render "partials/transaction_extend", local: {transaction: @transaction, id: @id} %>
        <% elsif @transaction.transaction_type == 'DRAFT' %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

